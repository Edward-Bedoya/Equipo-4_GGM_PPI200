if (self.CavalryLogger) { CavalryLogger.start_js(["bVxeW"]); }

__d("MPWLSDBCreateSchema.bs",["bs_js_dict","LSMetadata","LSTableSchemas","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";c=b("LSMetadata").buildMetadata(b("LSTableSchemas"));function a(a,c,d,e,f){f=b("bs_js_dict").get(a.tableNames,d);if(f!==void 0){f.cascadeUpdates.push({tableName:c,indexName:e});return 0}else return b("unrecoverableViolation")("Failed to add foreign key","messenger_comet")}a(c,"attachments","messages","fk_messages",0);a(c,"messages","threads",void 0,0);f.metadata=c;f.addForeignKey=a}),null);
__d("LSSecureVersion",[],(function(a,b,c,d,e,f){e.exports="3308785552541261"}),null);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="3057042327735043"}),null);
__d("MWLSDatabaseInitialData.bs",["bs_curry","LSDict","LSJson","gkx","SkytaleDB","bs_caml_int64","bs_caml_format","CurrentUser","LSSyncChannel.bs","LSDatabaseType.bs","LSMailboxInitialSyncRequest.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,b){return b.reduce(function(b,c){return b.then(function(b){return a.put(c)})},window.Promise.resolve(0))}function h(a){[0,0];[0,0];var c=b("LSJson").stringify(new(b("LSDict"))([]));[-1,4294967295];[0,0];[0,0];return[function(c){return g(b("SkytaleDB").table(a,"network_requests"),[{a:"",b:(c=b("LSDatabaseType.bs")).mailbox,c:b("LSMailboxInitialSyncRequest.bs").epochId.contents,d:void 0,e:[0,0],f:[0,0],g:b("bs_caml_int64").of_float(b("LSMailboxInitialSyncRequest.bs").lastSyncTimestampMs.contents),h:void 0},{a:"",b:c.contact,c:void 0,d:void 0,e:[0,0],f:[0,0],g:[0,0],h:void 0},{a:"",b:c.presence,c:void 0,d:void 0,e:[0,0],f:[0,0],g:[0,0],h:void 0},{a:"",b:c.payments,c:void 0,d:void 0,e:[0,0],f:[0,0],g:[0,0],h:void 0},{a:"",b:c.threadTheme,c:void 0,d:void 0,e:[0,0],f:[0,0],g:[0,0],h:void 0},{a:"",b:c.sticker,c:void 0,d:void 0,e:[0,0],f:[0,0],g:[0,0],h:void 0}])},function(d){var e;return g(b("SkytaleDB").table(a,"sync_groups"),[{a:(d=b("LSDatabaseType.bs")).mailbox,b:void 0,c:[0,0],d:b("LSJson").stringify(new(b("LSDict"))([["scale",1],["preview_height",200],["full_height",200]])),e:!0,f:[-1,4294967295],g:!1,h:[0,0],i:b("bs_caml_int64").of_float(b("LSMailboxInitialSyncRequest.bs").lastSyncTimestampMs.contents),j:void 0,k:void 0,l:void 0,m:void 0,n:b("LSMailboxInitialSyncRequest.bs").syncChannel.contents},{a:d.contact,b:void 0,c:[0,0],d:c,e:!0,f:[-1,4294967295],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:(e=b("LSSyncChannel.bs")).realtime},{a:d.presence,b:void 0,c:[0,0],d:c,e:!0,f:[-1,4294967295],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:e.realtime},{a:d.payments,b:void 0,c:[0,0],d:c,e:!0,f:[0,5e3],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:e.realtime},{a:d.threadTheme,b:void 0,c:[0,0],d:c,e:!0,f:[-1,4294967295],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:e.realtime},{a:d.sticker,b:void 0,c:[0,0],d:c,e:!0,f:[0,5e3],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:e.realtime},{a:d.ranking,b:void 0,c:[0,0],d:c,e:!0,f:b("gkx")("1713419")?[0,5e3]:[-1,4294967295],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:b("LSSyncChannel.bs").realtime},{a:b("LSDatabaseType.bs").cat,b:void 0,c:[0,0],d:c,e:!0,f:[-1,4294967295],g:!1,h:[0,0],i:[0,0],j:void 0,k:void 0,l:void 0,m:void 0,n:b("LSSyncChannel.bs").realtime}])},function(c){return g(b("SkytaleDB").table(a,"_user_info"),[{a:[0,1],b:b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID())}])}]}function a(a){return h(a).reduce(function(a,c){return a.then(b("bs_curry").__1(c))},window.Promise.resolve(0))}f.writeRows=g;f.writeData=h;f.run=a}),null);