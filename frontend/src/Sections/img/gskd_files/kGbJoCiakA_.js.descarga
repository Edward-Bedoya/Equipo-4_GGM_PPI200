if (self.CavalryLogger) { CavalryLogger.start_js(["ldfmp"]); }

__d("MessagingAttachmentType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];e=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10];f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k;f.selfieSticker=l}),null);
__d("LSPendingTasksPluginType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];e=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,16];f.lsBroker=a;f.payments=b;f.ephemeralMessaging=c;f.carrierMessaging=d;f.bugReporter=e;f.messageDenormalizations=g;f.seenHeads=h;f.mediaUpload=i;f.secureThreadSeenHeads=j;f.whatsappThread=k;f.secureThreadOverWaMessageSend=l;f.contactPruning=m;f.mediaManager=n;f.secureThreadOverWaEncryption=o;f.storyPost=p;f.coPresenceHeartbeat=q}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("hi-base32-0.5.0",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c},h;function i(){(function(){var c=typeof window==="object"?window:{},d=!c.HI_BASE32_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;d&&(c=a);d=!c.HI_BASE32_NO_COMMON_JS&&typeof g==="object"&&g.exports;var e=typeof h==="function"&&h.amd,i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),j={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},k=[0,0,0,0,0,0,0,0],l=function(a,b){b.length>10&&(b="..."+b.substr(-10));b=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+a+" bytes: "+b+" <-");b.position=a;throw b},m=function(a){var b="",c=a.length,d=0,e=0,f,g;while(d<c){f=a[d++];if(f<=127){b+=String.fromCharCode(f);continue}else f>191&&f<=223?(g=f&31,e=1):f<=239?(g=f&15,e=2):f<=247?(g=f&7,e=3):l(d,b);for(var h=0;h<e;++h)f=a[d++],(f<128||f>191)&&l(d,b),g<<=6,g+=f&63;g>=55296&&g<=57343&&l(d,b);g>1114111&&l(d,b);g<=65535?b+=String.fromCharCode(g):(g-=65536,b+=String.fromCharCode((g>>10)+55296),b+=String.fromCharCode((g&1023)+56320))}return b},n=function(a){if(!/^[A-Z2-7=]+$/.test(a))throw new Error("Invalid base32 characters");a=a.replace(/=/g,"");var b,c,d,e,f,g,h,i,k=[],l=0,m=a.length;for(var n=0,o=m>>3<<3;n<o;)b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],g=j[a.charAt(n++)],h=j[a.charAt(n++)],i=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255,k[l++]=(f<<7|g<<2|h>>>3)&255,k[l++]=(h<<5|i)&255;i=m-o;i===2?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255):i===4?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255):i===5?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255):i===7&&(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],g=j[a.charAt(n++)],h=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255,k[l++]=(f<<7|g<<2|h>>>3)&255);return k},o=function(a){var b,c,d,e,f,g="",h=a.length;for(var j=0,k=parseInt(h/5)*5;j<k;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=a.charCodeAt(j++),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[(e<<3|f>>>5)&31]+i[f&31];f=h-k;f===1?(b=a.charCodeAt(j),g+=i[b>>>3]+i[b<<2&31]+"======"):f===2?(b=a.charCodeAt(j++),c=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[c<<4&31]+"===="):f===3?(b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[d<<1&31]+"==="):f===4&&(b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[e<<3&31]+"=");return g},p=function(a){var b,c,d,e,f,g=!1,h="",j=0,l,m=0,n=a.length;do{k[0]=k[5];k[1]=k[6];k[2]=k[7];for(l=m;j<n&&l<5;++j)f=a.charCodeAt(j),f<128?k[l++]=f:f<2048?(k[l++]=192|f>>6,k[l++]=128|f&63):f<55296||f>=57344?(k[l++]=224|f>>12,k[l++]=128|f>>6&63,k[l++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++j)&1023),k[l++]=240|f>>18,k[l++]=128|f>>12&63,k[l++]=128|f>>6&63,k[l++]=128|f&63);m=l-5;j===n&&++j;j>n&&l<6&&(g=!0);f=k[0];l>4?(b=k[1],c=k[2],d=k[3],e=k[4],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[(c<<1|d>>>7)&31]+i[d>>>2&31]+i[(d<<3|e>>>5)&31]+i[e&31]):l===1?h+=i[f>>>3]+i[f<<2&31]+"======":l===2?(b=k[1],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[b<<4&31]+"===="):l===3?(b=k[1],c=k[2],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[c<<1&31]+"==="):(b=k[1],c=k[2],d=k[3],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[(c<<1|d>>>7)&31]+i[d>>>2&31]+i[d<<3&31]+"=")}while(!g);return h},q=function(a){var b,c,d,e,f,g="",h=a.length;for(var j=0,k=parseInt(h/5)*5;j<k;)b=a[j++],c=a[j++],d=a[j++],e=a[j++],f=a[j++],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[(e<<3|f>>>5)&31]+i[f&31];f=h-k;f===1?(b=a[j],g+=i[b>>>3]+i[b<<2&31]+"======"):f===2?(b=a[j++],c=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[c<<4&31]+"===="):f===3?(b=a[j++],c=a[j++],d=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[d<<1&31]+"==="):f===4&&(b=a[j++],c=a[j++],d=a[j++],e=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[e<<3&31]+"=");return g},r=function(a,b){var c=typeof a!=="string";c&&a.constructor===ArrayBuffer&&(a=new Uint8Array(a));if(c)return q(a);else if(b)return o(a);else return p(a)},s=function(a,b){if(!b)return m(n(a));if(!/^[A-Z2-7=]+$/.test(a))throw new Error("Invalid base32 characters");var c,d,e,f,g,h,i,k;b="";var l=a.indexOf("=");l===-1&&(l=a.length);for(var o=0,p=l>>3<<3;o<p;)c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],h=j[a.charAt(o++)],i=j[a.charAt(o++)],k=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)+String.fromCharCode((g<<7|h<<2|i>>>3)&255)+String.fromCharCode((i<<5|k)&255);k=l-p;k===2?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)):k===4?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)):k===5?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)):k===7&&(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],h=j[a.charAt(o++)],i=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)+String.fromCharCode((g<<7|h<<2|i>>>3)&255));return b},b={encode:r,decode:s};s.asBytes=n;d?g.exports=b:(c.base32=b,e&&h(function(){return b}))})()}var j=!1;function k(){j||(j=!0,i());return g.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("hi-base32",["hi-base32-0.5.0"],(function(a,b,c,d,e,f){e.exports=b("hi-base32-0.5.0")()}),null);
__d("LSMessageSendStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,4];e=[0,5];f.none=a;f.sendingToServer=b;f.serverReceived=c;f.nonRetriableError=d;f.retriableError=e}),null);
__d("MWLSSetBlockStatus.bs",["LS.bs","bs_curry","React","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSContactOptimisticSetBlockStatusStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c,d){var e=b("SkytaleDBHook.bs").useHook(0),f=b("MWThreadKey.bs").useIdMemoizedExn(0);return g.useCallback(function(g){b("promiseDone")(b("LSTransaction.bs").run(e,function(c){return b("LSContactOptimisticSetBlockStatusStoredProcedure")(f,a,void 0,!1,b("LS.bs").make(c))},557889961),function(a){return b("bs_curry")._1(c,0)},b("bs_curry").__1(d));return 0},[e,f])}f.useHook=a}),null);
__d("MWLSBlock.bs",["MWLSSetBlockStatus.bs","LSContactBlockedByViewerStatus.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MWLSSetBlockStatus.bs").useHook(b("LSContactBlockedByViewerStatus.bs").messageBlocked,a,c)}f.useHook=a}),null);
__d("MWLSUnblock.bs",["MWLSSetBlockStatus.bs","LSContactBlockedByViewerStatus.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MWLSSetBlockStatus.bs").useHook(b("LSContactBlockedByViewerStatus.bs").unblocked,a,c)}f.useHook=a}),null);
__d("LSContactGender.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];f.unknown=a;f.female=b;f.male=c;f.neuter=d}),null);
__d("LSMailboxType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1024];c=[0,2048];d=[0,2049];f.messenger=a;f.tincan=b;f.whatsappPhone=c;f.whatsappInterop=d}),null);
__d("MWLSParticipant.bs",["SkytaleDB","bs_belt_Option","LSContactType.bs","LSMailboxType.bs","SkytaleDBQuery.bs","LSContactGender.bs","LSContactBlockedByViewerStatus.bs"],(function(a,b,c,d,e,f){"use strict";var g=[0,0],h=[0,0],i=[0,0],j=[0,0],k=[0,0];g={contact_id:g,thread_key:h,contactType:b("LSContactType.bs").unknown,mailbox_type:b("LSMailboxType.bs").messenger,read_watermark_timestamp_ms:i,read_action_timestamp_ms:j,delivered_watermark_timestamp_ms:k,name:"",actual_name:"",nickname:void 0,blocked_by_viewer_status:b("LSContactBlockedByViewerStatus.bs").unblocked,profile_picture_url:"",is_messenger_user:!1,is_admin:!1,gender:b("LSContactGender.bs").unknown};function l(a){var c=a[1];a=a[0];var d=a.e;if(d!==void 0)d=d;else{var e=c.p;d=e!==void 0?e:c.h}return{contact_id:a.b,thread_key:a.a,contactType:c.q,mailbox_type:b("LSMailboxType.bs").messenger,read_watermark_timestamp_ms:a.c,read_action_timestamp_ms:a.k,delivered_watermark_timestamp_ms:a.d,name:d,actual_name:c.h,nickname:a.e,blocked_by_viewer_status:c.n,profile_picture_url:c.b,is_messenger_user:c.k,is_admin:b("bs_belt_Option").getWithDefault(a.f,!1),gender:c.I}}function m(a){var c=a[1];a=a[0];return{contact_id:a.b,thread_key:a.a,contactType:c.q,mailbox_type:b("LSMailboxType.bs").messenger,read_watermark_timestamp_ms:a.c,read_action_timestamp_ms:[0,0],delivered_watermark_timestamp_ms:a.d,name:c.h,actual_name:c.h,nickname:void 0,blocked_by_viewer_status:c.n,profile_picture_url:c.b,is_messenger_user:c.k,is_admin:!1,gender:c.I}}function a(a,c,d){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"participants").asc,[d,0]),c),l)}function c(a,c,d){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_thread_participants").asc,[d,0]),c),m)}function d(a,c){return b("SkytaleDBQuery.bs").getKeyRange(a,[c,0])}function e(a,c){return b("SkytaleDBQuery.bs").getKeyRange(a,[c,0])}f.empty=g;f.projectOpen=l;f.projectSecure=m;f.getAllInOpenThread=a;f.getAllInSecureThread=c;f.getInOpenThread=d;f.getInSecureThread=e}),null);
__d("MWLSLoadParticipants.bs",["FBID.bs","bs_int64","React","SkytaleDB","MercuryIDs","bs_caml_format","GenderConst","SkytaleDBHook.bs","MWLSParticipant.bs","MWThread_DEPRECATED.bs","LSMessagingThreadTypeUtil.bs","LSContactBlockedByViewerStatus.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThread_DEPRECATED.bs").toThreadKey(a);a=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);var e=b("bs_int64").to_string(d),f=b("SkytaleDB").table(c,"contacts").asc;d=g.useMemo(function(){return b("MWLSParticipant.bs").getAllInOpenThread(c,f,b("bs_caml_format").caml_int64_of_string(e))},[e,c]);var h=g.useMemo(function(){return b("MWLSParticipant.bs").getAllInSecureThread(c,f,b("bs_caml_format").caml_int64_of_string(e))},[e,c]);a=b("SkytaleDBQuerySubscriptionHook.bs").useArray(b("LSMessagingThreadTypeUtil.bs").isSecure(a)?h:d);h=a.reduce(function(a,c){var d=a[1];a=a[0];var e=b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.contact_id)),f=b("MercuryIDs").getParticipantIDFromUserID(e);a[f]={id:f,fbid:e,name:c.actual_name,image_src:c.profile_picture_url,square_image_src:null,accepts_messenger_user_feedback:!1,big_image_src:null,href:null,gender:b("GenderConst").NOT_A_PERSON,short_name:c.name,user_type:null,vanity:null,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:c.is_messenger_user,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_messenger_platform_bot:!1,is_messenger_blocked:c.blocked_by_viewer_status===b("LSContactBlockedByViewerStatus.bs").messageBlocked,is_subscribed_to_page_updates:!1,is_messenger_ignored:null,is_facebook_blocked:c.blocked_by_viewer_status===b("LSContactBlockedByViewerStatus.bs").fullyBlocked,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],wec_group_admins:[],timezone:null,verification_status:null};f=c.nickname;f!==void 0&&(d[e]=f);return[a,d]},[{},{}]);d=function(a,b){return};return[h[0],h[1],d]}function h(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThread_DEPRECATED.bs").toThreadKey(a);a=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);var e=b("bs_int64").to_string(d),f=b("SkytaleDB").table(c,"contacts").asc;d=g.useMemo(function(){return b("MWLSParticipant.bs").getAllInOpenThread(c,f,b("bs_caml_format").caml_int64_of_string(e))},[e,a,c]);var h=g.useMemo(function(){return b("MWLSParticipant.bs").getAllInSecureThread(c,f,b("bs_caml_format").caml_int64_of_string(e))},[e,a,c]);return b("SkytaleDBQuerySubscriptionHook.bs").useArray(b("LSMessagingThreadTypeUtil.bs").isSecure(a)?h:d)}function c(a){var c=h(a);return g.useMemo(function(){return c.reduce(function(a,c){return a.set(b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.contact_id)),c)},new Map())},[c])}function d(a){a=h(a);var c=new Map();a.forEach(function(a){var d=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.contact_id)),e=a.name,f=a.actual_name,g=a.nickname,h=a.profile_picture_url,i=a.is_admin;d={contactId:d,name:e,actualName:f,nickname:g,profileUrl:void 0,profilePictureUrl:h,isContact:!0,isAdmin:i};c.set(b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.contact_id)),d);return 0});return c}f.useMercuryParticipants=a;f.useMWLSParticipants=h;f.useMWLSParticipantsMap=c;f.useParticipants=d}),null);
__d("LSPresenceStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];f.offline=a;f.active=b}),null);
__d("MWLSPresence.bs",["bs_int64","SkytaleDB","SkytaleDBExec.bs","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return new Map(b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"participants").asc,[d,0]),c),function(a){a=a[1];return[b("bs_int64").to_string(a.a),a]})))}f.getInThread=a}),null);
__d("MWLSThreadImageUrls.bs",["bs_int64","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){if(d!==void 0)return[d];else{d=a.filter(function(a){return b("bs_caml_int64").neq(a.contact_id,c)}).slice();d.sort(function(a,c){return b("bs_int64").compare(a.delivered_watermark_timestamp_ms,c.delivered_watermark_timestamp_ms)});return d.map(function(a){return a.profile_picture_url})}}f.make=a}),null);
__d("MWLSThreadIsUnread.bs",["bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_int64").compare(a,c)>0}f.isUnread=a}),null);
__d("MWLSThreadTitle.bs",["fbt","bs_caml_array","bs_caml_int64","LSMessagingThreadTypeUtil.bs"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var c=a.length,d=a.length;return(d!==1?d!==0?c===2?g._("{participant1} y {participant2}",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1))]):c===3?g._("{participant1}, {participant2} y {participant3}",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1)),g._param("participant3",b("bs_caml_array").caml_array_get(a,2))]):g._("{participant1}, {participant2} y {others_count} personas m\u00e1s",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1)),g._param("others_count",String(c-2|0))]):g._("No hay participantes"):a[0]).toString()}function i(a){var b=a.nickname;if(b!==void 0)return b;else return a.actual_name}function j(a){var b=a.nickname;if(b!==void 0)return b;else return a.name}function a(a,c,d,e){e=b("LSMessagingThreadTypeUtil.bs").isGroup(e);var f=d.filter(function(a){return b("bs_caml_int64").neq(a.contact_id,c)});if(a!==void 0)return a;else if(e)return h(f.map(j));else if(d.length!==1)return h(f.map(i));else return i(d[0])}f.getTitleFromParticipants=h;f.make=a}),null);
__d("MWLSThread.bs",["bs_int64","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_option","MWLSPresence.bs","LSMailboxType.bs","SkytaleDBExec.bs","SkytaleDBQuery.bs","MWLSParticipant.bs","MWLSThreadTitle.bs","LSPresenceStatus.bs","MWLSThreadIsUnread.bs","LSMessageSendStatus.bs","MWLSThreadImageUrls.bs","LSContactBlockedByViewerStatus.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e,f){d=b("bs_caml_int64").eq(b("bs_belt_Option").getWithDefault(d,b("LSMessageSendStatus.bs").none),b("LSMessageSendStatus.bs").serverReceived);if(e&&d)return a.filter(function(a){var d=b("bs_int64").to_string(a.contact_id)===f;a=b("bs_int64").compare(a.read_watermark_timestamp_ms,b("bs_belt_Option").getWithDefault(c,b("bs_int64").max_int))>=0;if(d)return!1;else return a});else return[]}function a(a){if(b("bs_caml_int64").eq(a,[-1,4294967295]))return!0;else return b("bs_caml_int64").gt(a,b("bs_caml_int64").of_float(Date.now()))}function c(a,c,d,e){var f=e.a,h=e.c,i=b("MWLSPresence.bs").getInThread(a,d,f);d=b("SkytaleDBExec.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(a,c,f));c=d.some(function(a){return b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(i.get(b("bs_int64").to_string(a.contact_id))),!1,function(a){return b("bs_caml_int64").eq(a.b,b("LSPresenceStatus.bs").active)})});var j=b("SkytaleDBExec.bs").firstExn(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(a,"_user_info").asc,function(a){return a.b})),k=d.filter(function(a){return b("bs_caml_int64").neq(a.contact_id,j)}).slice();a=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"messages").desc,[f,0]));f=e.d;h=b("MWLSThreadTitle.bs").make(f,j,d,h);var l=b("MWLSThreadIsUnread.bs").isUnread(e.i,e.j),m=b("bs_belt_Option").mapWithDefault(b("bs_belt_Option").map(a,function(a){return a.h}),!1,function(a){return b("bs_caml_int64").eq(a,j)}),n;if(k.length!==1)n=!1;else{var o=k[0];n=k.length===1?b("bs_caml_int64").neq(o.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked):!1}return{thread_name:h,custom_thread_name:f,picture_urls:b("MWLSThreadImageUrls.bs").make(d,j,e.f),snippet:e.m,thread_key:e.a,last_activity_timestamp:e.i,mute_until:e.l,is_unread:l,thread_type:e.c,story_ring_state:0,parent_thread_key:e.A,is_typing:!1,folder_name:e.e,custom_badge_type:0,mailbox_type:b("LSMailboxType.bs").messenger,draft_message:void 0,ongoing_call_state:e.u,read_by:g(d,b("bs_belt_Option").map(a,function(a){return a.b}),b("bs_belt_Option").map(a,function(a){return a.l}),m,b("bs_int64").to_string(j)),last_message_sent_by_viewer:m,custom_emoji:e.w,is_blocked:n,is_active:c,snippet_sender_contact_id:e.o,otherParticipants:k}}function d(a,c,d,e){var f=e.a,h=e.l,i=b("MWLSPresence.bs").getInThread(a,d,f);d=b("SkytaleDBExec.bs").toArray(b("MWLSParticipant.bs").getAllInSecureThread(a,c,f));c=d.some(function(a){return b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(i.get(b("bs_int64").to_string(a.contact_id))),!1,function(a){return b("bs_caml_int64").eq(a.b,b("LSPresenceStatus.bs").active)})});var j=b("SkytaleDBExec.bs").firstExn(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(a,"_user_info").asc,function(a){return a.b})),k=d.filter(function(a){return b("bs_int64").to_string(a.contact_id)!==b("bs_int64").to_string(j)}).slice();a=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_messages").desc,[f,0]));f=b("MWLSThreadTitle.bs").make(void 0,j,d,h);h=e.c;var l=e.b,m=b("bs_belt_Option").mapWithDefault(b("bs_belt_Option").map(a,function(a){return a.i}),!1,function(a){return b("bs_caml_int64").neq(a,j)}),n;if(k.length!==1)n=!1;else{var o=k[0];n=k.length===1?b("bs_caml_int64").neq(o.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked):!1}return{thread_name:f,custom_thread_name:void 0,picture_urls:b("MWLSThreadImageUrls.bs").make(d,j,void 0),snippet:e.f,thread_key:e.a,last_activity_timestamp:l,mute_until:e.e,is_unread:b("bs_int64").compare(l,h)>0,thread_type:e.l,story_ring_state:0,parent_thread_key:[0,0],is_typing:!1,folder_name:"inbox",custom_badge_type:2,mailbox_type:b("LSMailboxType.bs").messenger,draft_message:void 0,ongoing_call_state:[0,0],read_by:g(d,b("bs_belt_Option").map(a,function(a){return a.b}),b("bs_belt_Option").map(a,function(a){return a.k}),m,b("bs_int64").to_string(j)),last_message_sent_by_viewer:m,custom_emoji:void 0,is_blocked:n,is_active:c,snippet_sender_contact_id:e.h,otherParticipants:k}}f.makeOpen=c;f.makeSecure=d;f.getThreadIsMuted=a}),null);
__d("MWLSCurrentThreadDetails.bs",["bs_int64","React","SkytaleDB","MWLSThread.bs","bs_caml_format","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","LSMessagingThreadTypeUtil.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWThread_DEPRECATED.bs").useIdExn(0);var d=b("bs_int64").to_string(b("MWThread_DEPRECATED.bs").toThreadKey(a)),e=g.useMemo(function(){var a=c,e=b("bs_caml_format").caml_int64_of_string(d),f=b("SkytaleDB").table(a,"contacts").asc,g=b("SkytaleDB").table(a,"presence_states").asc;return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"threads").asc,[e,0]),function(c){return b("MWLSThread.bs").makeOpen(a,f,g,c)})},[d,c]),f=g.useMemo(function(){var a=c,e=b("bs_caml_format").caml_int64_of_string(d),f=b("SkytaleDB").table(a,"contacts").asc,g=b("SkytaleDB").table(a,"presence_states").asc;return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_threads").asc,[e,0]),function(c){return b("MWLSThread.bs").makeSecure(a,f,g,c)})},[d,c]);if(b("LSMessagingThreadTypeUtil.bs").isSecure(b("LSMessagingThreadTypeUtil.bs").ofThreadId(a)))return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(f);else return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(e)}f.useCurrentThreadDetails=a}),null);
__d("MWLSLoadThreadPicture.bs",["MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);if(a!==void 0)return a.picture_urls;else return[]}f.useHook=a}),null);
__d("MWLSLoadThreadTitle.bs",["MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,b){return}function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);a=a!==void 0?a.thread_name:void 0;return[a,g]}f.useHook=a}),null);
__d("LSMailboxMessagesRangeQueryDirection.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];f.before=a;f.after=b}),null);
__d("MWLSPreloadThread.bs",["LS.bs","React","SkytaleDB","JSResource","JSScheduler","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometPreloader","LSMailboxMessagesRangeQueryDirection.bs","LSMailboxIssueMessagesRangeQueryStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("JSResource")("MWChatTabContainerCommon.bs").__setRef("MWLSPreloadThread.bs");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=g.useCallback(function(d){b("JSScheduler").scheduleSpeculativeCallback(function(){h.preload();return 0});d=b("LSTransaction.bs").run(c,function(c){return b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"messages_ranges_v2__generated").asc,[a,0])).then(function(d){if(d!==void 0){d=d;if(d.c===d.e)return b("LSMailboxIssueMessagesRangeQueryStoredProcedure")(a,d.b,b("LSMailboxMessagesRangeQueryDirection.bs").before,b("LS.bs").make(c));else return 0}else return 0})},557889961);b("promiseDone")(d,void 0,void 0);return 0},[c,JSON.stringify(a)]);return b("useCometPreloader")("button",d,d)}f.useHook=a}),null);
__d("MWLSThreadSnippetForDisplay.bs",["React","CometEmojiTransform","CometEmoticonTransform","CometTextWithEntities.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=[b("CometEmoticonTransform")(),b("CometEmojiTransform")()],i=/\uDB80\uDC00/;function a(a){if(a!==void 0){a=a.replace(i,"(Y)");return g.jsx(b("CometTextWithEntities.react"),{text:a,transforms:h})}else return null}f.make=a}),null);
__d("MWLSThreadUnreadMessageCount.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","MWThreadKey.bs","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThreadKey.bs").useIdMemoizedExn(0),e=b("MWLSActor.bs").useActor(0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[d,0]),function(a){var f;return b("SkytaleDBExec.bs").toArray((f=b("SkytaleDBQuery.bs")).filter(f.bounds(f.take(f.getKeyRange(b("SkytaleDB").table(c,"messages").desc,[d,0]),20),[-179650181,[a.j,0]]),function(a){return b("bs_caml_int64").neq(a.h,e)})).length})},[c,e,d]));if(a!==void 0)return a;else return 0}f.useHook=a}),null);
__d("MWLSPresenceIsThreadActive.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSPresenceStatus.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThreadKey.bs").useIdMemoizedExn(0),e=b("MWLSActor.bs").useActor(0);a=g.useMemo(function(){var a;return(a=b("SkytaleDBQuery.bs")).take(a.filter(a.mergeJoin(a.getKeyRange(b("SkytaleDB").table(c,"participants").asc,[d,0]),b("SkytaleDB").table(c,"presence_states").asc),function(a){if(b("bs_caml_int64").neq(a[0].b,e))return b("bs_caml_int64").eq(a[1].b,b("LSPresenceStatus.bs").active);else return!1}),1)},[c,d,e]);return b("bs_belt_Option").isSome(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(a))}f.useHook=a}),null);
__d("MWLSChatThreadHook.bs",["LS.bs","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","unrecoverableViolation","LSMailboxVerifyThreadRowExistsStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);g.useEffect(function(){var d=a[0],e=d!==757211935?d>=-914332868?b("MessagingThreadType.bs").oneToOne:b("unrecoverableViolation")("Not supported","messenger_web_product"):b("MessagingThreadType.bs").group;b("promiseDone")(b("LSTransaction.bs").run(c,function(c){var d=b("MWThread_DEPRECATED.bs").toThreadKey(a);return b("LSMailboxVerifyThreadRowExistsStoredProcedure")(d,e,b("LS.bs").make(c))},557889961),void 0,void 0);return},[a,c]);return 0}f.useThread=a}),null);